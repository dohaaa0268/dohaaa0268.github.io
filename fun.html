<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta property="og:locale" content="en_US">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <meta name="description" content="Play a silly game here!">
    <meta property="og:image:width" content="256">
    <meta property="og:image:height" content="256">
    <meta property="og:image:type" content="image/webp">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <meta property="og:url" content="https://dohaaa0268.github.io">
    <meta property="og:description" content="Play a silly game here!">
    <meta property="og:title" content="Doha's page - Fun">
    <meta property="og:site_name" content="Doha's page - Fun">
    <meta name="twitter:title" content="Doha's page - Fun">
    <meta name="application-name" content="Doha's page - Fun">
    <meta name="application-url" content="https://dohaaa0268.github.io">
    <meta name="twitter:url" content="https://dohaaa0268.github.io">
    <meta name="web_author" content="dohaaa0268">
    <!-- <meta name="twitter:creator" content="@dohaaa0268"> -->
    <!-- <meta name="twitter:site" content="@dohaaa0268"> -->
    <!-- <meta name="twitter:creator:id" content="1799269566834454528"> -->
    <!-- <meta name="twitter:site:id" content="1799269566834454528"> -->
    <meta name="creator" content="dohaaa0268">
    <meta name="designer" content="dohaaa0268">
    <meta name="twitter:image" content="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <meta name="twitter:image:width" content="256">
    <meta name="twitter:image:height" content="256">
    <meta name="msapplication-navbutton-color" content="#4B5390">
    <meta name="msapplication-TileColor" content="#4B5390">
    <meta name="msapplication-square150x150logo" content="./apple-touch-icon-152x152.png">
    <meta name="msapplication-square310x310logo" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-square70x70logo" content="./apple-touch-icon-72x72.png">
    <meta name="msapplication-wide310x150logo" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-TileImage" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-starturl" content="https://dohaaa0268.github.io">
    <meta name="msapplication-tooltip" content="Doha's page - Fun">
    <meta name="prism:alternateTitle" content="Doha's page - Fun">
    <meta name="twitter:card" content="summary">
    <meta name="thumbnail" content="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <meta property="profile:username" content="dohaaa0268">
    <!--summary_large_image,summary,app,or player -->
    <link rel="icon" type="image/x-icon" id="icon" href="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <link rel="shortcut icon" href="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <meta name="robots" content="index">
    <meta name="theme-color" content="#4B5390">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="author" content="dohaaa0268">
    <link rel="canonical" href="https://dohaaa0268.github.io">
    <!--
    <script 
        type="application/ld+json">{"@context":"https://schema.org","@type": "WebSite","name":"dohaaa0268","url":"https://dohaaa0268.github.io","description":"Play a silly game here!","author":{"@type": "Person","name":"dohaaa0268","sameAs":["https://twitter.com/dohaaa0268"]},"mainEntityOfPage":{"@type":"WebPage","@id":"https://dohaaa0268.github.io"},"image":{"@type":"ImageObject","url":"https://addsoupbase.github.io/media/avatars/Dohaaa.webp","width":256,"height":256}}</script>
    -->
    <link rel="apple-touch-icon" sizes="57x57" href="./apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon-180x180.png">
    <meta name="mobile-web-app-capable" content="no">
    <meta name="apple-mobile-web-app-capable" content="no">
    <!--^ yes if the site has stuff like back buttons-->
    <meta name="apple-mobile-web-app-title" content="Doha's page - Fun">
    <link rel="apple-touch-startup-image" href="https://addsoupbase.github.io/media/avatars/Dohaaa.webp">
    <script src="https://addsoupbase.github.io/css.js" blocking="render"></script>
    <script src="https://addsoupbase.github.io/css_bad.js" nomodule></script>
    <link rel="stylesheet" href="css/styles.css">
    <title>Doha's page - Fun</title>
    <link rel="preload" as="font" href="./fonts/pixel2.woff2" crossorigin="anonymous">
    <link rel="prefetch" as="document" href="about.html" fetchpriority="low">
    <link rel="prefetch" as="document" href="draw.html" fetchpriority="low">
    <!--https://wiki.whatwg.org/wiki/MetaExtensions-->
    <!--[if IE]><script>alert('Please update your browser')</script><![endif]-->
    <link rel="preload" href="media/clownfish.webp" as="image">
    <link rel="preload" href="media/turtle.webp" as="image">
    <!-- <script type="module" src="https://addsoupbase.github.io/webcomponents/yay.js"></script> -->
    <script type="module" src="https://addsoupbase.github.io/webcomponents/touch-joystick.js"></script>
</head>

<body>
    <style>
        #controls button::first-letter {
            text-decoration: initial;
        }

        button {
            --zoom: 1.5
        }

        #controls,
        #controls button {
            --user-select: none;
        }

        #controls {
            position: fixed;
            bottom: 0;
            place-items: center;
            place-self: center;
        }

        #lr button {
            margin-left: 25px;
            margin-right: 25px;
            touch-action: none;
        }

        #canvas {
            background: #72eaf2;
            background: radial-gradient(circle, rgba(114, 234, 242, 1) 0%, rgba(56, 130, 128, 1) 100%);
            height: 350px;
            width: 100%;
            border-radius: 3px;
            margin-top: 5px;
            margin-bottom: 5px;
                filter: drop-shadow(0px 4px 6px black);
            /* image-rendering: pixelated; */
            /* width: 100%; */
            /* height: 100%; */
            /* position: absolute; */
        }
        #hint {
            position: absolute;
            place-content: center;
            place-items: center;
            place-self: center;
        }
    </style>
    <main class="centerx" style="padding:0;margin:0">
        <!-- <div style="display: grid;place-content: center;place-items: center;"> -->
        <!-- <h1>Example</h1> -->
        <canvas id="canvas"></canvas>
        <!-- </div> -->
        <div style="place-items: center; margin:15px;display:flex;place-content:center">
            <touch-joystick></touch-joystick>
        </div>
        <aside id="hint">Click to move joystick</aside>
        <!-- 
        <div id="controls">
                <div>
                    <button aria-controls="canvas" class="button" aria-label="Up">↑</button>
                </div>
                <div id="lr">
                    <button aria-controls="canvas" class="button" aria-label="Left">←</button>
                    <button aria-controls="canvas" class="button" aria-label="Right">→</button>
                </div>
                <div>
                    <button aria-controls="canvas" class="button" aria-label="Down">↓</button>
                </div>
            </div>
            -->
    </main>
    <script src="https://addsoupbase.github.io/h.js"></script>
    <script type="module">
        import { vect, clamp } from 'https://addsoupbase.github.io/num.js'
        const h = window[Symbol.for('[[HModule]]')]
        let speed = 4
        var ctrl = document.getElementById('controls')
        var canvas = document.getElementById('canvas')
        let hint = document.getElementById('hint')
        var ctx = canvas.getContext('2d')
        var joystick = document.querySelector('touch-joystick')
        joystick.addEventListener('move', function () {
            turt.angle = this.angle
            hint.remove()
        })
        var all = new Set
        ctx.imageSmoothingQuality = 'high'
        function obj(x, y, type) {
            all.add(this)
            this.x = x
            this.y = y
            this.size = 50
            this.angle = 0
            switch (type) {
                case 'clownfish': {
                    this.img = clownfish
                    this.size *= .8
                }
                    break
                default: this.img = turtle
            }
        }
        function draw(obj) {
            obj.x = clamp(obj.x, obj.size / 2, canvas.width - obj.size / 2)
            obj.y = clamp(obj.y, obj.size / 2, canvas.height - obj.size / 2)
            ctx.save()
            ctx.translate(obj.x, obj.y)
            // ctx.beginPath()
            // ctx.rect(-obj.size / 2, -obj.size / 2, obj.size, obj.size, 0, Math.PI * 2)
            // ctx.stroke()
            ctx.rotate(Math.PI / 4)
            obj.img === clownfish && ctx.rotate(-.08)
            ctx.rotate(obj.angle)
            ctx.drawImage(obj.img, -obj.size / 2, -obj.size / 2, obj.size, obj.size)
            ctx.restore()
        }
        function update() {
            turt.x += joystick.x * speed
            turt.y += joystick.y * speed
            requestAnimationFrame(update)
            ctx.clearRect(0, 0, canvas.width, canvas.height)
            // ctx.globalAlpha = 0.3
            // ctx.fillStyle = 'blue'
            // ctx.fillRect(0,0,canvas.width,canvas.height,)
            // ctx.globalAlpha=1
            all.forEach(draw)
        }
        function resize() {
            canvas.width = canvas.scrollWidth
            canvas.height = canvas.scrollHeight
        }
        h.on(window, {
            resize,
            _load() {
                setTimeout(() => {
                    resize()
                    fish = new obj(30, 30, 'clownfish')
                    turt = new obj(100, 50, 'turtle')
                    update()
                })
            }
        })
        var clownfish = new Image
        var turtle = new Image
        var turt
        var fish
        // canvas.width = canvas.parentElement.clientWidth
        // canvas.height = canvas.parentElement.clientHeight
        clownfish.onerror = turtle.onerror = function () {
            this.onerror = null
            this.src = this.src.replace('webp', 'png')
        }
        clownfish.src = './media/clownfish.webp'
        turtle.src = './media/turtle.webp'
        h.on(ctrl, {
            $contextmenu: function () { }
        })
    </script>
</body>

</html>